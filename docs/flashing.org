#+STARTUP: showall

* Flashing the ESP32-S3

Instructions for building and flashing the slave firmware.

** Prerequisites

PlatformIO Core (CLI) installed via pipx:

#+begin_example
pipx install platformio
#+end_example

** Build

#+begin_example
make build-slave       # RS-485 transport
make build-slave-wifi  # WiFi transport
#+end_example

** Flash

#+begin_example
make flash-slave SLAVE_ADDR=1       # RS-485 transport
make flash-slave-wifi SLAVE_ADDR=1  # WiFi transport
#+end_example

~SLAVE_ADDR~ is required and sets the device address (1-254).

For WiFi builds, copy ~master/wifi.toml.example~ to ~master/wifi.toml~
and fill in your credentials.

The device typically appears at ~/dev/ttyACM0~.

** Bootloader recovery

If the device is unresponsive or flashing fails:

1. Hold the BOOT button
2. Tap the RST button
3. Release BOOT

The device is now in bootloader mode and ready for flashing.
