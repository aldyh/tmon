#+STARTUP: showall
* Storage specification

SQLite database for persisting temperature readings collected by the
master poller.

- *Database file:* ~tmon.db~ (configurable in ~config.toml~).
- *Engine:* SQLite 3
- *Write pattern:* one INSERT per successful poll reply.
- *No deletes or updates* during normal operation.

** Schema

*** ~readings~ table

Stores one row per successful REPLY frame received from a slave.

The authoritative schema is in [[file:../schema/readings.sql][schema/readings.sql]].

*** Column details

| Column | Type    | Description                                                                         |
|--------+---------+-------------------------------------------------------------------------------------|
| id     | INTEGER | Auto-incrementing primary key.                                                      |
| ts     | TEXT    | UTC timestamp in ISO-8601 format (~YYYY-MM-DDTHH:MM:SSZ~).                          |
| addr   | INTEGER | Slave address from the REPLY frame (1-247).                                         |
| temp_0 | INTEGER | Channel 0 reading in tenths of a degree Celsius, or NULL if the channel is invalid. |
| temp_1 | INTEGER | Channel 1 reading, same encoding as temp_0.                                         |
| temp_2 | INTEGER | Channel 2 reading, same encoding as temp_0.                                         |
| temp_3 | INTEGER | Channel 3 reading, same encoding as temp_0.                                         |
